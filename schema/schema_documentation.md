# Schema documentation

Generated by MySQL Workbench Model Documentation v1.0.0 - Copyright (c) 2015 Hieu Le

## Table: `product`

### Description: 

All products in the online shop.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(100) |  |   | Product name |
| `manufacturer_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `manufacturer`. |
| `product_category_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product_category`. |
| `amount` | INT |  | `0` | If it equals to 0 product is not in sale |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `manufacturer_id`, `product_category_id` | PRIMARY |   |
| fk_product_manufacturer1_idx | `manufacturer_id` | INDEX |   |
| fk_product_product_category1_idx | `product_category_id` | INDEX |   |


## Table: `product_category`

### Description: 

Categories for all product in the shop. They could be hierarchical.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(100) |  |   | Name of category |
| `slug` | VARCHAR(45) |  |   | Slug to be a part of an URL |
| `parent_id` | INT |  |   | Id for parent category. If it equals to NULL a category is the top level parent |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `manufacturer`

### Description: 

A company which produced products

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `fullname` | VARCHAR(255) |  |   | Full name of company |
| `brand` | VARCHAR(100) |  |   | Brand name |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `client`

### Description: 

Table with information of shopâ€™s customers.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `first_name` | VARCHAR(100) |  |   |   |
| `second_name` | VARCHAR(100) |  |   |   |
| `email` | VARCHAR(100) |  |   | @ is mandatory symbol in the field |
| `phone` | VARCHAR(45) |  |   | Should be in format: 1-415-1234567 without + sign |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `purchase`

### Description: 

Shop's cart. It represents a single order.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `client_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `client`. |
| `created` | DATETIME |  |   | An auto field when a purchase was created |
| `modified` | DATETIME |  |   | An auto field when a purchase was modified |
| `status` | SET |  | `'new'` | Status of purchase. `New` - client just created an order, `paid` - received payment from client, `deliver` - an order is heading to client, `done` - client has received products, `rejected` - client cancelled an order, `error` - an error while processing a payment transaction. |
| `payment_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `payment`. |
| `total` | INT |  |   | Sum of all products costs. Value in coins/cents. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `client_id`, `payment_id` | PRIMARY |   |
| fk_purchase_client1_idx | `client_id` | INDEX |   |
| fk_purchase_payment1_idx | `payment_id` | INDEX |   |


## Table: `payment`

### Description: 

Information of purchase transaction

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `status` | ENUM |  | `'pending'` | If status `pending` - client has not paid yet when it's `done` - client pait full amount. |
| `created` | DATE |  |   | An auto field when a payment was created |
| `transaction_info` | TEXT(1000) |  |   | Transaction status information received from payment system. |
| `payment_method_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `payment_method`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `payment_method_id` | PRIMARY |   |
| fk_payment_payment_method1_idx | `payment_method_id` | INDEX |   |


## Table: `price`

### Description: 

Price for a product

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `product_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product`. |
| `effective_start_date` | DATETIME |  | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | The beginning date when a price becomes effective. By default when record creates it is equal current datetime. |
| `effective_end_date` | DATETIME |  |   | The end date when a price gets irrelevant. |
| `value` | INT |  |   | Value of price in coins/cents |
| `rebate` | INT |  |   | Discount value in percents |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `product_id` | PRIMARY |   |
| fk_price_product1_idx | `product_id` | INDEX |   |


## Table: `purchase_product`

### Description: 

Table where purchase, product and price get together

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `purchase_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `purchase`. |
| `product_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product`. |
| `price_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `price`. |
| `amount` | INT |  |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `purchase_id`, `product_id`, `price_id` | PRIMARY |   |
| fk_purchase_has_product_product1_idx | `product_id` | INDEX |   |
| fk_purchase_has_product_purchase1_idx | `purchase_id` | INDEX |   |
| fk_purchase_product_price1_idx | `price_id` | INDEX |   |


## Table: `payment_method`

### Description: 

Table of payment methods

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(45) |  |   | Short name of payment system. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `attribute`

### Description: 

Set of product's attributes 

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(45) |  |   |   |
| `value` | VARCHAR(45) |  |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `product_attribute`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `product_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product`. |
| `attribute_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `attribute`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `product_id`, `attribute_id` | PRIMARY |   |
| fk_product_has_attribute_attribute1_idx | `attribute_id` | INDEX |   |
| fk_product_has_attribute_product1_idx | `product_id` | INDEX |   |


