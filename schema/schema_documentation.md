# Schema documentation

Generated by MySQL Workbench Model Documentation v1.0.0 - Copyright (c) 2015 Hieu Le

## Table: `product`

### Description: 

All products in the online shop.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(100) |  |   | Product name |
| `manufacturer_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `manufacturer`. |
| `additional_property_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `additional_property`. |
| `product_category_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product_category`. |
| `amount` | INT |  | `0` | If it equals to 0 product is not in sale |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `manufacturer_id`, `additional_property_id`, `product_category_id` | PRIMARY |   |
| fk_product_manufacturer1_idx | `manufacturer_id` | INDEX |   |
| fk_product_additional_property1_idx | `additional_property_id` | INDEX |   |
| fk_product_product_category1_idx | `product_category_id` | INDEX |   |


## Table: `product_category`

### Description: 

Categories for all product in the shop. They could be hierarchical.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `name` | VARCHAR(100) |  |   | Name of category |
| `slug` | VARCHAR(45) |  |   | Slug to be a part of an URL |
| `parent_id` | INT |  |   | Id for parent category. If it equals to NULL a category is the top level parent |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `manufacturer`

### Description: 

A company which produced products

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `fullname` | VARCHAR(255) |  |   | Full name of company |
| `brand` | VARCHAR(100) |  |   | Brand name |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `client`

### Description: 

Table with information of shopâ€™s customers.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `first_name` | VARCHAR(45) |  |   |   |
| `second_name` | VARCHAR(45) |  |   |   |
| `email` | VARCHAR(45) |  |   | @ is mandatory symbol in the field |
| `phone` | VARCHAR(45) |  |   | Should be in format: 1-415-1234567 without + sign |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `purchase`

### Description: 

Shop's cart. It represents a single order.

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `client_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `client`. |
| `created` | DATE |  |   | An auto field when a purchase was created |
| `modified` | DATE |  |   | An auto field when a purchase was modified |
| `status` | SET |  | `'new'` | Status of purchase. `New` - client just created an order, `paid` - received payment from client, `deliver` - an order is heading to client, `done` - client has received products, `rejected` - client cancelled an order. |
| `payment_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `payment`. |
| `total` | INT |  |   | Sum of all products costs. Value in coins/cents. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `client_id`, `payment_id` | PRIMARY |   |
| fk_purchase_client1_idx | `client_id` | INDEX |   |
| fk_purchase_payment1_idx | `payment_id` | INDEX |   |


## Table: `payment`

### Description: 

Information of purchase transaction

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `status` | ENUM |  | `'pending'` | If status `pending` - client has not paid yet when it's `done` - client pait full amount. |
| `created` | DATE |  |   | An auto field when a payment was created |
| `method` | VARCHAR(45) |  |   | Name of payment system. |
| `transaction_info` | TEXT(1000) |  |   | Transaction status information received from payment system. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `additional_property`

### Description: 

Additional information of a product

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `year` | SMALLINT |  |   | A year when a product was produced. Example: 2019 |
| `color` | VARCHAR(45) |  |   | A color of product. Example: _black_ |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `price`

### Description: 

Price for a product

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `product_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product`. |
| `effective_date` | DATETIME |  |   | If it set to `NULL` then price is actual for product otherwise price was effective up to date set in field. |
| `value` | INT |  |   | Value of price in coins/cents |
| `rebate` | FLOAT |  |   | Discount for a price. Example: 0.21. If value = 3000 cents and rebate = 0.21 then total price = 3000 * 0.21 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id`, `product_id` | PRIMARY |   |
| fk_price_product1_idx | `product_id` | INDEX |   |


## Table: `purchase_product`

### Description: 

Table where purchase, product and price get together

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `purchase_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `purchase`. |
| `product_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `product`. |
| `price_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `price`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `purchase_id`, `product_id`, `price_id` | PRIMARY |   |
| fk_purchase_has_product_product1_idx | `product_id` | INDEX |   |
| fk_purchase_has_product_purchase1_idx | `purchase_id` | INDEX |   |
| fk_purchase_product_price1_idx | `price_id` | INDEX |   |


